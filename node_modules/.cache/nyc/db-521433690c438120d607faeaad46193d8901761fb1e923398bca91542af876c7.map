{"version":3,"sources":["db.js"],"names":["DB_NAME","process","env","NODE_ENV","getUserByUsername","username","MongoClient","connect","useNewUrlParser","useUnifiedTopology","client","db","collection","findOne","result","close"],"mappings":";;;;;;;AAAA;;;;;;AAEA,IAAMA,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,MAAzB,GACN,SADM,GAEN,SAFV;;AAIO,IAAMC,iBAAiB;AAAA,qEAAG,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACRC,qBAAYC,OAAZ,qCACYP,OADZ,GAEjB;AACIQ,cAAAA,eAAe,EAAE,IADrB;AAEIC,cAAAA,kBAAkB,EAAE;AAFxB,aAFiB,CADQ;;AAAA;AACvBC,YAAAA,MADuB;AAQvBC,YAAAA,EARuB,GAQlBD,MAAM,CAACC,EAAP,CAAUX,OAAV,CARkB;AAAA;AAAA,mBAURW,EAAE,CAACC,UAAH,CAAc,OAAd,EAAuBC,OAAvB,CAA+B;AAAER,cAAAA,QAAQ,EAARA;AAAF,aAA/B,CAVQ;;AAAA;AAUvBS,YAAAA,MAVuB;AAY7BJ,YAAAA,MAAM,CAACK,KAAP;AAZ6B,6CActBD,MAdsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAjBV,iBAAiB;AAAA;AAAA;AAAA,GAAvB;;;eAiBQ;AACXA,EAAAA,iBAAiB,EAAjBA;AADW,C","sourceRoot":"/home/kjack/development/likedin-learning/tdd-server/src/","sourcesContent":["import { MongoClient } from 'mongodb';\n\nconst DB_NAME = process.env.NODE_ENV === 'test'\n        ? 'TEST_DB' \n        : 'PROD_DB';\n\nexport const getUserByUsername = async username => {\n    const client = await MongoClient.connect(\n        `mongodb://localhost:27017/${DB_NAME}`,\n        {\n            useNewUrlParser: true,\n            useUnifiedTopology: true,\n        },\n    );\n    const db = client.db(DB_NAME);\n\n    const result = await db.collection('users').findOne({ username });\n\n    client.close();\n\n    return result;\n}\n\nexport default {\n    getUserByUsername\n}"]}